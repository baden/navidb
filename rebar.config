%% Copyright (C) 2013 Baden (baden.i.ua@gmail.com).
%% -*- mode: erlang -*-
{require_otp_vsn, "17"}.
{erl_opts, [
    debug_info,
    warnings_as_errors,
    % fail_on_warning,
    % warn_format,
    warn_export_vars,
    % warn_exported_vars,
    % warn_obsolete_guard,
    % warn_bif_clash,
    % warn_unused_vars,
    % warn_unused_import,
    % {src_dirs, ["src", "test"]},
    % {i, ["include"]},
    {parse_transform, lager_transform},
    % {platform_define, "^17", no_binary_to_integer},
    % {platform_define, "^[0-9]+", namespaced_dicts},
    {platform_define, "^(17)", coding_utf8}
]}.

%{deps_dir, ["deps"]}.
%{lib_dirs, ["../../apps"]}.
% {lib_dirs, ["deps"]}.
% {src_dirs, ["src", "test"]}.

{deps_dir, "deps"}.
{deps, [
    {lager,   ".*", {git, "git://github.com/basho/lager.git",          {branch, "master"}}},
    {mongodb, ".*", {git, "git://github.com/baden/mongodb-erlang.git", {branch, "refresh"}}}
]}.

{clean_files, ["logs/*", "test/*.beam", "doc/*.html", "doc/erlang.png", "doc/stylesheet.css", "doc/edoc-info", "site/*.html"]}.

{edoc_opts, [
    % {exclude_packages, [navidb_mongodb, navidb_cache]},
    {source_path, ["src"]},
    {todo, true}
    % {doclet, edown_doclet},
    % {top_level_readme,
    %           {"./README.md", "http://github.com/baden/erlnavicc"}}
]}.

% %% == EUnit ==
%
% {eunit_opts, [verbose, {skip_deps, true}]}.
% {eunit_exclude_deps, true}.
% % {eunit_opts, [verbose,
% %    {report, {eunit_surefire, [{dir, "."}]}}]}.
%
%
% {cover_enabled, true}.
%
%
% {xref_warnings, true}.
% {xref_checks, [
%     undefined_function_calls, undefined_functions, locals_not_used,
%     deprecated_function_calls, deprecated_functions
% ]}.
%
%
% % {plugins, [rebar_ct]}.
% {ct_exclude_deps, true}.
%
% %% Common test
% % {ct_log_dir, "logs"}.
% % {ct_extra_params, "-no_auto_compile -dir ebin -pa deps/*/ebin -smp enable -s mongodb -erl_args -config test/test.config"}.
% {ct_extra_params, "-erl_args -config test/test.config"}.
% % {ct_extra_params,"-dir ebin -pa deps/*/ebin -smp enable -s emysql -s sumo_db -erl_args -config test/test.config"}.
% % {ct_extra_params,"-no_auto_compile -erl_args -config test/test.config"}.
